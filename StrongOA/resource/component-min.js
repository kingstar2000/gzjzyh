(function($){$.fn.Cascade=function(setting){var ps=$.extend({sel:"",type:""},setting);ps.sel=(typeof ps.sel=="string"?$(ps.sel):ps.sel);var init=function(){var root=ps.sel[0];var data=getData(root,0);if(data){for(i=0;i<data.length;i=i+1){$('<option value="'+data[i].value+'">'+data[i].text+"</option>").appendTo(root);}}for(i=0;i<ps.sel.length;i++){$(ps.sel[i]).bind("change",selchange);}},getData=function(obj,index,value){var srcdata,data;if(value==null){srcdata=$(ps.sel[index]).attr("srcdata");}else{var srcdata=$(ps.sel[index+1]).attr("srcdata");}if(srcdata!=null){if(ps.type=="fun"){srcdata=srcdata+"("+value+");";data=eval(srcdata);}else{if(ps.type=="local"){data=eval("("+srcdata+")");if(value!=null){data=getNextData(index,value,data);}}else{if(ps.type=="remote"){$.post(srcdata,{value:value},function(data1){data=$.parseJSON(data1);if(data){if(value==null){for(i=0;i<data.length;i=i+1){$('<option value="'+data[i].value+'">'+data[i].text+"</option>").appendTo(ps.sel[index]);}}else{for(i=0;i<data.length;i=i+1){$('<option value="'+data[i].value+'">'+data[i].text+"</option>").appendTo(ps.sel[index+1]);}}}});}}}}else{data=[];}return data;},getNextData=function(index,value,data){var i,arr=[];if(data){for(i=0;i<data.length;i=i+1){if(data[i].fk==value){arr.push(data[i]);}}}return arr;},removeop=function(sel){sel.find("option[value!=-1]").remove();},getSelVal=function(sel){return sel.find("option:selected").val();},selchange=function(e){that=$(this),selVal=getSelVal(that),index=ps.sel.index(that),data=[],i;removeOpAfter(index);data=getData(that,index,selVal);if(data){for(i=0;i<data.length;i=i+1){$('<option value="'+data[i].value+'">'+data[i].text+"</option>").appendTo(ps.sel[index+1]);}}},removeOpAfter=function(i){var ii;for(ii=0;ii<ps.sel.length;ii=ii+1){if(ii>i){removeop($(ps.sel[ii]));}}};init();};})(jQuery);(function(a){function b(){return false;}a.fn.contextmenu=function(o){o=a.extend({alias:"cmroot",width:150,theme:"b-m-mpanel"},o);var u=null,E=null,A={},D={},k={},t=[],x="<div class='b-m-$[type]' unselectable=on><nobr unselectable='on'><img src='$[icon]' align='absmiddle'/><span class='contextmenu' unselectable='on'>$[text]</span></nobr></div>";var m=a("<div/>").addClass(o.theme).attr("unselectable","on").css("display","none");var l=a("<div/>").addClass("b-m-item").attr("unselectable","on");var j=a("<div/>").addClass("b-m-split");var w=function(F){A[F.alias]=this;this.gidx=F.alias;this.id=F.alias;if(F.disable){this.disable=F.disable;this.className="b-m-idisable";}a(this).width(F.width).mousedown(b).appendTo(a("body"));F=null;return this;};var h=function(G){var F=this;F.title=G.text;F.idx=G.alias;F.gidx=G.gidx;F.data=G;F.innerHTML=x.replace(/\$\[([^\]]+)\]/g,function(){return G[arguments[1]];});if(G.disable){F.disable=G.disable;F.className="b-m-idisable";}G.items&&(F.group=true);G.action&&(k[G.alias]=G.action);D[G.alias]=F;F=G=null;return this;};var p=function(I,F){var H=null;for(var G=0;G<F.length;G++){if(F[G].type=="splitLine"){H=j.clone()[0];}else{F[G].gidx=I;if(F[G].type=="group"){w.apply(m.clone()[0],[F[G]]);arguments.callee(F[G].alias,F[G].items);F[G].type="arrow";H=h.apply(l.clone()[0],[F[G]]);}else{F[G].type="ibody";H=h.apply(l.clone()[0],[F[G]]);a(H).click(function(J){if(!this.disable){c();if(a.isFunction(k[this.idx])){k[this.idx].call(this,E);}}});}a(H).bind("contextmenu",b).hover(r,B);}A[I].appendChild(H);H=F[G]=F[G].items=null;}I=F=null;};var r=function(G){if(this.disable){return false;}c.call(A[this.gidx]);if(this.group){var H=a(this).offset();var F=a(this).outerWidth();e.apply(A[this.idx],[H,F]);}this.className="b-m-ifocus";return false;};var B=function(F){if(this.disable){return false;}if(!this.group){this.className="b-m-item";}return false;};var e=function(K,H){var J=a("body").width();var G=document.documentElement.clientHeight;var I=a(this).outerWidth();var F=a(this).outerHeight();K.left=(K.left+H+I>J)?(K.left-I<0?0:K.left-I):K.left+H;K.top=(K.top+F>G)?(K.top-F+(H>0?25:0)<0?0:K.top-F+(H>0?25:0)):K.top;a(this).css(K).show();t.push(this.gidx);};var c=function(){var G=null;for(var F=t.length-1;F>=0;F--){if(t[F]==this.gidx){break;}G=t.pop();A[G].style.display="none";D[G]&&(D[G].className="b-m-item");}};var z=function(){var G=null;for(var F=t.length-1;F>=0;F--){G=t.pop();A[G].style.display="none";D[G]&&(D[G].className="b-m-item");}};function f(G){if(u&&u==G.name){return false;}for(var F in D){d(F,!G.disable);}for(var F=0;F<G.items.length;F++){d(G.items[F],G.disable);}u=G.name;}function d(F,G){var H=D[F];H.className=(H.disable=H.lastChild.disabled=G)?"b-m-idisable":"b-m-item";}function q(F,G){E=G;e.call(A[o.alias],{left:F.pageX,top:F.pageY},0);a(document).one("mousedown",c);}function y(G,H,F){E=H;e.call(A[o.alias],F,0);a(document).one("mousedown",c);}function g(G,H){var F=(o.onContextMenu&&a.isFunction(o.onContextMenu))?o.onContextMenu.call(H,G):true;if(F){if(o.onShow&&a.isFunction(o.onShow)){o.onShow.call(H,this);}this.showMenu(G,H);}}function s(H,I,F){var G=(o.onContextMenu&&a.isFunction(o.onContextMenu))?o.onContextMenu.call(I,H):true;if(G){if(o.onShow&&a.isFunction(o.onShow)){o.onShow.call(I,this);}this.showMenuByPos(H,I,F);}}var C=a("#"+o.alias);var v=null;if(C.length==0){v=w.apply(m.clone()[0],[o]);v.applyrule=f;v.showMenu=q;v.displayMenu=g;v.showMenuByPos=y;v.displayMenuByPos=s;v.hideMenuPane=z;p(o.alias,o.items);}else{v=C[0];}if(o.rule){f(o.rule);}m=l=j=x=w=h=null;p=r=B=null;return v;};})(jQuery);(function(j){if(/1\.(0|1|2)\.(0|1|2)/.test(j.fn.jquery)||/^1.1/.test(j.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+j.fn.jquery);return;}j.fn._fadeIn=j.fn.fadeIn;var c=function(){};var k=document.documentMode||0;var e=j.browser.msie&&((j.browser.version<8&&!k)||k<8);var f=j.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!k;j.blockUI=function(r){d(window,r);};j.unblockUI=function(r){h(window,r);};j.growlUI=function(v,t,u,r){var s=j('<div class="growlUI"></div>');if(v){s.append("<h1>"+v+"</h1>");}if(t){s.append("<h2>"+t+"</h2>");}if(u==undefined){u=3000;}j.blockUI({message:s,fadeIn:700,fadeOut:1000,centerY:false,timeout:u,showOverlay:false,onUnblock:r,css:j.blockUI.defaults.growlCSS});};j.fn.block=function(r){return this.unblock({fadeOut:0}).each(function(){if(j.css(this,"position")=="static"){this.style.position="relative";}if(j.browser.msie){this.style.zoom=1;}d(this,r);});};j.fn.unblock=function(r){return this.each(function(){h(this,r);});};j.blockUI.version=2.31;j.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"1px solid red",backgroundColor:"yellow",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#fff",opacity:0.1,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var b=null;var g=[];function d(v,H){var C=(v==window);var y=H&&H.message!==undefined?H.message:undefined;H=j.extend({},j.blockUI.defaults,H||{});H.overlayCSS=j.extend({},j.blockUI.defaults.overlayCSS,H.overlayCSS||{});var E=j.extend({},j.blockUI.defaults.css,H.css||{});var P=j.extend({},j.blockUI.defaults.themedCSS,H.themedCSS||{});y=y===undefined?H.message:y;if(C&&b){h(window,{fadeOut:0});}if(y&&typeof y!="string"&&(y.parentNode||y.jquery)){var K=y.jquery?y[0]:y;var R={};j(v).data("blockUI.history",R);R.el=K;R.parent=K.parentNode;R.display=K.style.display;R.position=K.style.position;if(R.parent){R.parent.removeChild(K);}}var D=H.baseZ;var O=(j.browser.msie||H.forceIframe)?j('<iframe class="blockUI" style="z-index:'+(D++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+H.iframeSrc+'"></iframe>'):j('<div class="blockUI" style="display:none"></div>');var N=j('<div class="blockUI blockOverlay" style="z-index:'+(D++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var M;if(H.theme&&C){var I='<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+D+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(H.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>';M=j(I);}else{M=C?j('<div class="blockUI blockMsg blockPage" style="z-index:'+D+';display:none;position:fixed"></div>'):j('<div class="blockUI blockMsg blockElement" style="z-index:'+D+';display:none;position:absolute"></div>');}if(y){if(H.theme){M.css(P);M.addClass("ui-widget-content");}else{M.css(E);}}if(!H.applyPlatformOpacityRules||!(j.browser.mozilla&&/Linux/.test(navigator.platform))){N.css(H.overlayCSS);}N.css("position",C?"fixed":"absolute");if(j.browser.msie||H.forceIframe){O.css("opacity",0);}var B=[O,N,M],Q=C?j("body"):j(v);j.each(B,function(){this.appendTo(Q);});if(H.theme&&H.draggable&&j.fn.draggable){M.draggable({handle:".ui-dialog-titlebar",cancel:"li"});}var x=e&&(!j.boxModel||j("object,embed",C?null:v).length>0);if(f||x){if(C&&H.allowBodyStretch&&j.boxModel){j("html,body").css("height","100%");}if((f||!j.boxModel)&&!C){var G=o(v,"borderTopWidth"),L=o(v,"borderLeftWidth");var A=G?"(0 - "+G+")":0;var F=L?"(0 - "+L+")":0;}j.each([O,N,M],function(t,U){var z=U[0].style;z.position="absolute";if(t<2){C?z.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+H.quirksmodeOffsetHack+') + "px"'):z.setExpression("height",'this.parentNode.offsetHeight + "px"');C?z.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):z.setExpression("width",'this.parentNode.offsetWidth + "px"');if(F){z.setExpression("left",F);}if(A){z.setExpression("top",A);}}else{if(H.centerY){if(C){z.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');}z.marginTop=0;}else{if(!H.centerY&&C){var S=(H.css&&H.css.top)?parseInt(H.css.top):0;var T="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+S+') + "px"';z.setExpression("top",T);}}}});}if(y){if(H.theme){M.find(".ui-widget-content").append(y);}else{M.append(y);}if(y.jquery||y.nodeType){j(y).show();}}if((j.browser.msie||H.forceIframe)&&H.showOverlay){O.show();}if(H.fadeIn){var J=H.onBlock?H.onBlock:c;var u=(H.showOverlay&&!y)?J:c;var r=y?J:c;if(H.showOverlay){N._fadeIn(H.fadeIn,u);}if(y){M._fadeIn(H.fadeIn,r);}}else{if(H.showOverlay){N.show();}if(y){M.show();}if(H.onBlock){H.onBlock();}}m(1,v,H);if(C){b=M[0];g=j(":input:enabled:visible",b);if(H.focusInput){setTimeout(q,20);}}else{a(M[0],H.centerX,H.centerY);}if(H.timeout){var w=setTimeout(function(){C?j.unblockUI(H):j(v).unblock(H);},H.timeout);j(v).data("blockUI.timeout",w);}}function h(u,v){var t=(u==window);var s=j(u);var w=s.data("blockUI.history");var x=s.data("blockUI.timeout");if(x){clearTimeout(x);s.removeData("blockUI.timeout");}v=j.extend({},j.blockUI.defaults,v||{});m(0,u,v);var r;if(t){r=j("body").children().filter(".blockUI").add("body > .blockUI");}else{r=j(".blockUI",u);}if(t){b=g=null;}if(v.fadeOut){r.fadeOut(v.fadeOut);setTimeout(function(){l(r,w,v,u);},v.fadeOut);}else{l(r,w,v,u);}}function l(r,u,t,s){r.each(function(v,w){if(this.parentNode){this.parentNode.removeChild(this);}});if(u&&u.el){u.el.style.display=u.display;u.el.style.position=u.position;if(u.parent){u.parent.appendChild(u.el);}j(s).removeData("blockUI.history");}if(typeof t.onUnblock=="function"){t.onUnblock(s,t);}}function m(r,v,w){var u=v==window,t=j(v);if(!r&&(u&&!b||!u&&!t.data("blockUI.isBlocked"))){return;}if(!u){t.data("blockUI.isBlocked",r);}if(!w.bindEvents||(r&&!w.showOverlay)){return;}var s="mousedown mouseup keydown keypress";r?j(document).bind(s,w,p):j(document).unbind(s,p);}function p(u){if(u.keyCode&&u.keyCode==9){if(b&&u.data.constrainTabKey){var t=g;var s=!u.shiftKey&&u.target==t[t.length-1];var r=u.shiftKey&&u.target==t[0];if(s||r){setTimeout(function(){q(r);},10);return false;}}}if(j(u.target).parents("div.blockMsg").length>0){return true;}return j(u.target).parents().children().filter("div.blockUI").length==0;}function q(r){if(!g){return;}var s=g[r===true?g.length-1:0];if(s){s.focus();}}function a(z,r,B){var A=z.parentNode,w=z.style;var u=((A.offsetWidth-z.offsetWidth)/2)-o(A,"borderLeftWidth");var v=((A.offsetHeight-z.offsetHeight)/2)-o(A,"borderTopWidth");if(r){w.left=u>0?(u+"px"):"0";}if(B){w.top=v>0?(v+"px"):"0";}}function o(r,s){return parseInt(j.css(r,s))||0;}})(jQuery);jQuery.ui||(function(a){a.ui={version:"1.8.1",plugin:{add:function(c,d,f){var e=a.ui[c].prototype;for(var b in f){e.plugins[b]=e.plugins[b]||[];e.plugins[b].push([d,f[b]]);}},call:function(b,d,c){var f=b.plugins[d];if(!f||!b.element[0].parentNode){return;}for(var e=0;e<f.length;e++){if(b.options[f[e][0]]){f[e][1].apply(b.element,c);}}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c);},hasScroll:function(e,c){if(a(e).css("overflow")=="hidden"){return false;}var b=(c&&c=="left")?"scrollLeft":"scrollTop",d=false;if(e[b]>0){return true;}e[b]=1;d=(e[b]>0);e[b]=0;return d;},isOverAxis:function(c,b,d){return(c>b)&&(c<(b+d));},isOver:function(g,c,f,e,b,d){return a.ui.isOverAxis(g,f,b)&&a.ui.isOverAxis(c,e,d);},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus();(c&&c.call(d));},b);}):this._focus.apply(this,arguments);},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","");},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none");},scrollParent:function(){var b;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){b=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1));}).eq(0);}else{b=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1));}).eq(0);}return(/fixed/).test(this.css("position"))||!b.length?a(document):b;},zIndex:function(e){if(e!==undefined){return this.css("zIndex",e);}if(this.length){var c=a(this[0]),b,d;while(c.length&&c[0]!==document){b=c.css("position");if(b=="absolute"||b=="relative"||b=="fixed"){d=parseInt(c.css("zIndex"));if(!isNaN(d)&&d!=0){return d;}}c=c.parent();}}return 0;}});a.extend(a.expr[":"],{data:function(d,c,b){return !!a.data(d,b[3]);},focusable:function(c){var d=c.nodeName.toLowerCase(),b=a.attr(c,"tabindex");return(/input|select|textarea|button|object/.test(d)?!c.disabled:"a"==d||"area"==d?c.href||!isNaN(b):!isNaN(b))&&!a(c)["area"==d?"parents":"closest"](":hidden").length;},tabbable:function(c){var b=a.attr(c,"tabindex");return(isNaN(b)||b>=0)&&a(c).is(":focusable");}});})(jQuery);(function(b){var a=b.fn.remove;b.fn.remove=function(c,d){return this.each(function(){if(!d){if(!c||b.filter(c,[this]).length){b("*",this).add(this).each(function(){b(this).triggerHandler("remove");});}}return a.call(b(this),c,d);});};b.widget=function(d,f,c){var e=d.split(".")[0],h;d=d.split(".")[1];h=e+"-"+d;if(!c){c=f;f=b.Widget;}b.expr[":"][h]=function(j){return !!b.data(j,d);};b[e]=b[e]||{};b[e][d]=function(j,k){if(arguments.length){this._createWidget(j,k);}};var g=new f();g.options=b.extend({},g.options);b[e][d].prototype=b.extend(true,g,{namespace:e,widgetName:d,widgetEventPrefix:b[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:h},c);b.widget.bridge(d,b[e][d]);};b.widget.bridge=function(d,c){b.fn[d]=function(g){var e=typeof g==="string",f=Array.prototype.slice.call(arguments,1),h=this;g=!e&&f.length?b.extend.apply(null,[true,g].concat(f)):g;if(e&&g.substring(0,1)==="_"){return h;}if(e){this.each(function(){var j=b.data(this,d),k=j&&b.isFunction(j[g])?j[g].apply(j,f):j;if(k!==j&&k!==undefined){h=k;return false;}});}else{this.each(function(){var j=b.data(this,d);if(j){if(g){j.option(g);}j._init();}else{b.data(this,d,new c(g,this));}});}return h;};};b.Widget=function(c,d){if(arguments.length){this._createWidget(c,d);}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,e){this.element=b(e).data(this.widgetName,this);this.options=b.extend(true,{},this.options,b.metadata&&b.metadata.get(e)[this.widgetName],d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy();});this._create();this._init();},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");},widget:function(){return this.element;},option:function(e,f){var d=e,c=this;if(arguments.length===0){return b.extend({},c.options);}if(typeof e==="string"){if(f===undefined){return this.options[e];}d={};d[e]=f;}b.each(d,function(g,h){c._setOption(g,h);});return c;},_setOption:function(c,d){this.options[c]=d;if(c==="disabled"){this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d);}return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_trigger:function(d,e,f){var h=this.options[d];e=b.Event(e);e.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();f=f||{};if(e.originalEvent){for(var c=b.event.props.length,g;c;){g=b.event.props[--c];e[g]=e.originalEvent[g];}}this.element.trigger(e,f);return !(b.isFunction(h)&&h.call(this.element[0],e,f)===false||e.isDefaultPrevented());}};})(jQuery);(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,data:false,wholeCss:"accor",event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},hideIcons:false,hideDiv:false,headerNavigation:false,navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase();}},_create:function(){var b=this.options,p=this;this.running=0;if(b.data){var m,k,q="",r="",l,h,c;for(var e=0;e<b.data.length;e++){c=false;l=">";h="";m=b.data[e];if(m.pid=="-1"){q=q+"<h3";r="><a onfocus='this.blur()';  href=\""+m.url+'">'+m.name+"</a></h3><div><ul";for(var d=0;d<b.data.length;d++){k=b.data[d];if(k.pid==m.id){c=true;l=l+"<li><a onfocus='this.blur()' href=\""+k.url+'">'+k.name+"</a></li>";}}if(!c&&b.hideIcons){h=h+" header-noicon ";}if(!c&&b.hideDiv){h=h+" header-nodiv ";}if(m.url==null||m.url==""||m.url=="null"){h=h+" header-nourl ";}q=q+" class='"+h+"'"+r+l;q=q+"</ul></div>";}}this.element.append(a(q));}this.element.addClass(b.wholeCss);if(this.element[0].nodeName=="UL"){this.element.children("li").addClass("li-fix");}this.headers=this.element.find(b.header).addClass("accordion-header").bind("mouseenter.accordion",function(){a(this).addClass("state-hover");}).bind("mouseleave.accordion",function(){a(this).removeClass("state-hover");}).bind("focus.accordion",function(){a(this).addClass("state-focus");}).bind("blur.accordion",function(){a(this).removeClass("state-focus");});this.headers.next().addClass("accordion-content").css("overflow","auto");this.subs=this.headers.next().find("li");this.subs.bind("click",{subs:this.subs},function(j){var o=j.data.subs.filter(function(){return a(this).hasClass("active");});o.removeClass("active");a(this).addClass("active");});if(b.navigation){var g=this.element.find("a").filter(b.navigationFilter);if(g.length){var f=g.closest(".ui-accordion-header");if(f.length){this.active=f;}else{this.active=g.closest(".ui-accordion-content").prev();}}}this.active=this._findActive(this.active||b.active).toggleClass("state-active");this.active.next().addClass("accordion-content-active");this._createIcons();this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(j){return p._keydown(j);}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex","0");}else{this.active.attr("aria-expanded","true").attr("tabIndex","0");}if(!a.browser.safari){this.headers.find("a").attr("tabIndex","-1");}if(b.event){this.headers.bind((b.event)+".accordion",function(j){p._clickHandler.call(p,j,this);if(!b.headerNavigation||a(this).hasClass("header-nourl")){j.preventDefault();}});}},_createIcons:function(){var b=this.options;if(b.icons){a("<span/>").addClass("icon_tree_menu").prependTo(this.headers);}},_destroyIcons:function(){this.headers.children(".icon_tree_menu").remove();},destroy:function(){var c=this.options;this.element.removeClass(c.wholeCss).removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("accordion-header state-active").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("accordion-content accordion-content-active");if(c.autoHeight||c.fillHeight){b.css("height","");}return this;},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b=="active"){this.activate(c);}if(b=="icons"){this._destroyIcons();if(c){this._createIcons();}}},_keydown:function(e){var g=this.options,f=a.ui.keyCode;if(g.disabled||e.altKey||e.ctrlKey){return;}var d=this.headers.length;var b=this.headers.index(e.target);var c=false;switch(e.keyCode){case f.RIGHT:case f.DOWN:c=this.headers[(b+1)%d];break;case f.LEFT:case f.UP:c=this.headers[(b-1+d)%d];break;case f.SPACE:case f.ENTER:this._clickHandler({target:e.target},e.target);e.preventDefault();}if(c){a(e.target).attr("tabIndex","-1");a(c).attr("tabIndex","0");c.focus();return false;}return true;},resize:function(){var d=this.options,c;if(d.fillSpace){if(a.browser.msie){var b=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden");}c=this.element.parent().height();if(a.browser.msie){this.element.parent().css("overflow",b);}this.headers.each(function(){c-=a(this).outerHeight(true);});this.headers.next().each(function(){if(a(this).prev().hasClass("header-nodiv")){}else{a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()));}}).css("overflow","auto");}else{if(d.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height());}).height(c);}}return this;},activate:function(b){this.options.active=b;var c=this._findActive(b)[0];this._clickHandler({target:c},c);return this;},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)");},_clickHandler:function(b,f){var d=this.options;if(d.disabled){return;}if(!b.target){if(!d.collapsible){return;}this.active.removeClass("state-active");this.active.next().addClass("accordion-content-active");var h=this.active.next(),e={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:h},c=(this.active=a([]));this._toggle(c,h,e);return;}var g=a(b.currentTarget||f);var j=g[0]==this.active[0];d.active=d.collapsible&&j?false:a(".accordion-header",this.element).index(g);if(this.running||(!d.collapsible&&j)){return;}this.active.removeClass("state-active");if(!j){g.addClass("state-active");g.next().addClass("accordion-content-active");}var c=g.next(),h=this.active.next(),e={options:d,newHeader:j&&d.collapsible?a([]):g,oldHeader:this.active,newContent:j&&d.collapsible?a([]):c,oldContent:h},k=this.headers.index(this.active[0])>this.headers.index(g[0]);this.active=j?a([]):g;this._toggle(c,h,e,j,k);return;},_toggle:function(b,j,g,k,l){var d=this.options,p=this;this.toShow=b;this.toHide=j;this.data=g;var c=function(){if(!p){return;}return p._completed.apply(p,arguments);};this._trigger("changestart",null,this.data);this.running=j.size()===0?b.size():j.size();if(d.animated){var f={};if(d.collapsible&&k){f={toShow:a([]),toHide:j,complete:c,down:l,autoHeight:d.autoHeight||d.fillSpace};}else{f={toShow:b,toHide:j,complete:c,down:l,autoHeight:d.autoHeight||d.fillSpace};}if(!d.proxied){d.proxied=d.animated;}if(!d.proxiedDuration){d.proxiedDuration=d.duration;}d.animated=a.isFunction(d.proxied)?d.proxied(f):d.proxied;d.duration=a.isFunction(d.proxiedDuration)?d.proxiedDuration(f):d.proxiedDuration;var m=a.ui.accordion.animations,e=d.duration,h=d.animated;if(h&&!m[h]&&!a.easing[h]){h="slide";}if(!m[h]){m[h]=function(o){this.slide(o,{easing:h,duration:e||700});};}m[h](f);}else{if(d.collapsible&&k){b.toggle();}else{j.hide();b.show();}c(true);}j.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();b.prev().attr("aria-expanded","true").attr("tabIndex","0").focus();},_completed:function(b){var c=this.options;this.running=b?0:--this.running;if(this.running){return;}if(c.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""});}this.toHide.removeClass("accordion-content-active");this._trigger("change",null,this.data);}});a.extend(a.ui.accordion,{version:"1.8.1",animations:{slide:function(k,h){k=a.extend({easing:"swing",duration:300},k,h);if(!k.toHide.size()){k.toShow.animate({height:"show"},k);return;}if(!k.toShow.size()){k.toHide.animate({height:"hide"},k);return;}var c=k.toShow.css("overflow"),g=0,d={},f={},e=["height","paddingTop","paddingBottom"],b;var j=k.toShow;b=j[0].style.width;j.width(parseInt(j.parent().width(),10)-parseInt(j.css("paddingLeft"),10)-parseInt(j.css("paddingRight"),10)-(parseInt(j.css("borderLeftWidth"),10)||0)-(parseInt(j.css("borderRightWidth"),10)||0));a.each(e,function(l,o){f[o]="hide";var m=(""+a.css(k.toShow[0],o)).match(/^([\d+-.]+)(.*)$/);d[o]={value:m[1],unit:m[2]||"px"};});k.toShow.css({height:0,overflow:"hidden"}).show();k.toHide.filter(":hidden").each(k.complete).end().filter(":visible").animate(f,{step:function(l,m){if(m.prop=="height"){g=(m.end-m.start===0)?0:(m.now-m.start)/(m.end-m.start);if(k.toHide.prev().hasClass("header-nodiv")){g=1;}}k.toShow[0].style[m.prop]=(g*d[m.prop].value)+d[m.prop].unit;},duration:k.duration,easing:k.easing,complete:function(){if(!k.autoHeight||k.toShow.prev().hasClass("header-nodiv")){k.toShow.css("height","");}k.toShow.css("width",b);k.toShow.css({overflow:c});k.complete();}});},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200});}}});})(jQuery);(function(l){l.ui=l.ui||{};var p=/left|center|right/,m="center",o=/top|center|bottom/,k="center",j=l.fn.position,h=l.fn.offset;l.fn.position=function(e){if(!e||!e.of){return j.apply(this,arguments);}e=l.extend({},e);var b=l(e.of),g=(e.collision||"flip").split(" "),a=e.offset?e.offset.split(" "):[0,0],c,f,d;if(e.of.nodeType===9){c=b.width();f=b.height();d={top:0,left:0};}else{if(e.of.scrollTo&&e.of.document){c=b.width();f=b.height();d={top:b.scrollTop(),left:b.scrollLeft()};}else{if(e.of.preventDefault){e.at="left top";c=f=0;d={top:e.of.pageY,left:e.of.pageX};}else{c=b.outerWidth();f=b.outerHeight();d=b.offset();}}}l.each(["my","at"],function(){var q=(e[this]||"").split(" ");if(q.length===1){q=p.test(q[0])?q.concat([k]):o.test(q[0])?[m].concat(q):[m,k];}q[0]=p.test(q[0])?q[0]:m;q[1]=o.test(q[1])?q[1]:k;e[this]=q;});if(g.length===1){g[1]=g[0];}a[0]=parseInt(a[0],10)||0;if(a.length===1){a[1]=a[0];}a[1]=parseInt(a[1],10)||0;if(e.at[0]==="right"){d.left+=c;}else{if(e.at[0]===m){d.left+=c/2;}}if(e.at[1]==="bottom"){d.top+=f;}else{if(e.at[1]===k){d.top+=f/2;}}d.left+=a[0];d.top+=a[1];return this.each(function(){var s=l(this),t=s.outerWidth(),u=s.outerHeight(),v=l.extend({},d);if(e.my[0]==="right"){v.left-=t;}else{if(e.my[0]===m){v.left-=t/2;}}if(e.my[1]==="bottom"){v.top-=u;}else{if(e.my[1]===k){v.top-=u/2;}}l.each(["left","top"],function(q,r){if(l.ui.position[g[q]]){l.ui.position[g[q]][r](v,{targetWidth:c,targetHeight:f,elemWidth:t,elemHeight:u,offset:a,my:e.my,at:e.at});}});if(l.fn.bgiframe){s.bgiframe();}s.offset(l.extend(v,{using:e.using}));});};l.ui.position={fit:{left:function(d,c){var a=l(window),b=d.left+c.elemWidth-a.width()-a.scrollLeft();d.left=b>0?d.left-b:Math.max(0,d.left);},top:function(d,c){var a=l(window),b=d.top+c.elemHeight-a.height()-a.scrollTop();d.top=b>0?d.top-b:Math.max(0,d.top);}},flip:{left:function(e,d){if(d.at[0]==="center"){return;}var b=l(window),c=e.left+d.elemWidth-b.width()-b.scrollLeft(),f=d.my[0]==="left"?-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,a=-2*d.offset[0];e.left+=e.left<0?f+d.targetWidth+a:c>0?f-d.targetWidth+a:0;},top:function(e,c){if(c.at[1]==="center"){return;}var a=l(window),b=e.top+c.elemHeight-a.height()-a.scrollTop(),f=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,d=c.at[1]==="top"?c.targetHeight:-c.targetHeight,g=-2*c.offset[1];e.top+=e.top<0?f+c.targetHeight+g:b>0?f+d+g:0;}}};if(!l.offset.setOffset){l.offset.setOffset=function(b,e){if(/static/.test(l.curCSS(b,"position"))){b.style.position="relative";}var c=l(b),g=c.offset(),f=parseInt(l.curCSS(b,"top",true),10)||0,a=parseInt(l.curCSS(b,"left",true),10)||0,d={top:(e.top-g.top)+f,left:(e.left-g.left)+a};if("using" in e){e.using.call(b,d);}else{c.css(d);}};l.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument){return null;}if(b){return this.each(function(){l.offset.setOffset(this,b);});}return h.call(this);};}}(jQuery));(function(b){b.widget("ui.autocomplete",{options:{minLength:1,delay:300},_create:function(){var a=this,d=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(f){var c=b.ui.keyCode;switch(f.keyCode){case c.PAGE_UP:a._move("previousPage",f);break;case c.PAGE_DOWN:a._move("nextPage",f);break;case c.UP:a._move("previous",f);f.preventDefault();break;case c.DOWN:a._move("next",f);f.preventDefault();break;case c.ENTER:if(a.menu.active){f.preventDefault();}case c.TAB:if(!a.menu.active){return;}a.menu.select();break;case c.ESCAPE:a.element.val(a.term);a.close(f);break;case c.SHIFT:case c.CONTROL:case 18:break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){a.search(null,f);},a.options.delay);break;}}).bind("focus.autocomplete",function(){a.previous=a.element.val();}).bind("blur.autocomplete",function(c){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);},150);});this._initSource();this.response=function(){return a._response.apply(a,arguments);};this.menu=b("<ul></ul>").addClass("ui-autocomplete").appendTo("body",d).menu({focus:function(g,c){var h=c.item.data("item.autocomplete");if(false!==a._trigger("focus",null,{item:h})){a.element.val(h.value);}},selected:function(g,c){var h=c.item.data("item.autocomplete");if(false!==a._trigger("select",g,{item:h})){a.element.val(h.value);}a.close(g);a.previous=a.element.val();if(a.element[0]!==d.activeElement){a.element.focus();}},blur:function(f,c){if(a.menu.element.is(":visible")){a.element.val(a.term);}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(b.fn.bgiframe){this.menu.element.bgiframe();}},destroy:function(){this.element.removeClass("ui-autocomplete-input ui-widget ui-widget-content").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();b.Widget.prototype.destroy.call(this);},_setOption:function(a){b.Widget.prototype._setOption.apply(this,arguments);if(a==="source"){this._initSource();}},_initSource:function(){var d,a;if(b.isArray(this.options.source)){d=this.options.source;this.source=function(g,h){var c=new RegExp(b.ui.autocomplete.escapeRegex(g.term),"i");h(b.grep(d,function(e){return c.test(e.label||e.value||e);}));};}else{if(typeof this.options.source==="string"){a=this.options.source;this.source=function(c,f){b.getJSON(a,c,f);};}else{this.source=this.options.source;}}},search:function(d,a){d=d!=null?d:this.element.val();if(d.length<this.options.minLength){return this.close(a);}clearTimeout(this.closing);if(this._trigger("search")===false){return;}return this._search(d);},_search:function(a){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:a},this.response);},_response:function(a){if(a.length){a=this._normalize(a);this._suggest(a);this._trigger("open");}else{this.close();}this.element.removeClass("ui-autocomplete-loading");},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",a);this.menu.element.hide();this.menu.deactivate();}if(this.previous!==this.element.val()){this._trigger("change",a);}},_normalize:function(a){if(a.length&&a[0].label&&a[0].value){return a;}return b.map(a,function(d){if(typeof d==="string"){return{label:d,value:d};}return b.extend({label:d.label||d.value,value:d.value||d.label},d);});},_suggest:function(a){var h=this.menu.element.empty().zIndex(this.element.zIndex()+1),g,f;this._renderMenu(h,a);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"});g=h.width("").width();f=this.element.width();h.width(Math.max(g,f));},_renderMenu:function(e,f){var a=this;b.each(f,function(d,c){a._renderItem(e,c);});},_renderItem:function(a,d){return b("<li></li>").data("item.autocomplete",d).append("<a>"+d.label+"</a>").appendTo(a);},_move:function(d,a){if(!this.menu.element.is(":visible")){this.search(null,a);return;}if(this.menu.first()&&/^previous/.test(d)||this.menu.last()&&/^next/.test(d)){this.element.val(this.term);this.menu.deactivate();return;}this.menu[d]();},widget:function(){return this.menu.element;}});b.extend(b.ui.autocomplete,{escapeRegex:function(a){return a.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1");}});}(jQuery));(function(b){b.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(d){d.preventDefault();a.select();});this.refresh();},refresh:function(){var d=this;var a=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");a.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(){d.activate(b(this).parent());}).mouseleave(function(){d.deactivate();});},activate:function(g){this.deactivate();if(this.hasScroll()){var f=g.offset().top-this.element.offset().top,a=this.element.attr("scrollTop"),h=this.element.height();if(f<0){this.element.attr("scrollTop",a+f);}else{if(f>h){this.element.attr("scrollTop",a+f-h+g.height());}}}this.active=g.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",null,{item:g});},deactivate:function(){if(!this.active){return;}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null;},next:function(){this.move("next","li:first");},previous:function(){this.move("prev","li:last");},first:function(){return this.active&&!this.active.prev().length;},last:function(){return this.active&&!this.active.next().length;},move:function(e,f){if(!this.active){this.activate(this.element.children(f));return;}var a=this.active[e]();if(a.length){this.activate(a);}else{this.activate(this.element.children(f));}},nextPage:function(){if(this.hasScroll()){if(!this.active||this.last()){this.activate(this.element.children(":first"));return;}var e=this.active.offset().top,f=this.element.height(),a=this.element.children("li").filter(function(){var c=b(this).offset().top-e-f+b(this).height();return c<10&&c>-10;});if(!a.length){a=this.element.children(":last");}this.activate(a);}else{this.activate(this.element.children(!this.active||this.last()?":first":":last"));}},previousPage:function(){if(this.hasScroll()){if(!this.active||this.first()){this.activate(this.element.children(":last"));return;}var d=this.active.offset().top,a=this.element.height();result=this.element.children("li").filter(function(){var c=b(this).offset().top-d+a-b(this).height();return c<10&&c>-10;});if(!result.length){result=this.element.children(":first");}this.activate(result);}else{this.activate(this.element.children(!this.active||this.first()?":last":":first"));}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight");},select:function(){this._trigger("selected",null,{item:this.active});}});}(jQuery));(function(e){var f={menu:[],item1:[],item2:[],clickedFlag:false};var d=function(){var g;for(g=0;g<f.menu.length;g=g+1){f.menu[g].removeClass("clicked");}},b=function(h){var g=e(this);if(g.hasClass("clicked")){g.removeClass("clicked");f.clickedFlag=false;}else{d();g.addClass("clicked");f.clickedFlag=true;}a(h,g);h.stopPropagation();},c=function(h){var g=e(this);if(f.clickedFlag){d();g.addClass("clicked");a(h,g);h.stopPropagation();}},a=function(m,o){var l,k,r=o.height(),g=o.width(),q=o.offset().top,j=o.offset().left,h=q+r+2,p=j;for(l=0;l<f.menu.length;l=l+1){if(f.menu[l].hasClass("clicked")){f.item1[l].displayMenuByPos(m,m.target,{left:p,top:h});for(k=0;k<f.item2.length;k=k+1){if(k!==l){f.item2[k][0].hideMenuPane();}}break;}}};e.extend({menu:function(){e(document).click(function(g){if(g.target.toString().indexOf("HTMLLIElement")===-1){d();f.clickedFlag=false;}});},bindMenuItem:function(j,k){var l=e("#"+j),h=e.fn.contextmenu(k),g=e("#"+k.alias);f.menu.push(l);f.item1.push(h);f.item2.push(g);l.bind("click",b);l.bind("mouseover",c);}});})(jQuery);(function(){var b,a,c;b=function(e){var d=/(\d{1,3})(?=(\d{3})+(?:$|\D))/g;return e.replace(d,"$1,");};a=function(g){var d,f,e;if(g.indexOf(".")>0){d=g.split(".");f=d[0];e=d[1];f=b(f);e=b(e);return f+"."+e;}else{return b(g);}};c=function(d){return d.replace(/,/g,"");};$.NumberInput=function(f){var h=$.extend({inputId:null,mark:"",accuracy:null},f);var g=this,e,d;h.hiddenEl=$("#"+h.inputId).attr("tagFlag","numberInput").hide();h.inputEl=$('<input type="text" tagFlag="numberInput" id="_'+h.inputId+'">');h.hiddenEl.before(h.inputEl);e=function(){var j=h.hiddenEl.val();h.inputEl.val(j);};d=function(){var p=h.inputEl.val(),j,o,m,k,l;if(p===""){h.hiddenEl.val("");return;}if(p.indexOf(".")<1){if(h.accuracy>0){p=p+".";}for(l=1;l<=h.accuracy;l+=1){p=p+"0";}h.hiddenEl.val(p);p=a(p);p=h.mark+p;}else{j=p.split(".");o=j[0];m=j[1];k=m.length;if(k===h.accuracy){h.hiddenEl.val(p);p=a(p);p=h.mark+p;}else{if(k>h.accuracy){m=m.slice(0,h.accuracy);if(h.accuracy>0){p=o+"."+m;}else{p=o;}h.hiddenEl.val(p);p=a(p);p=h.mark+p;}else{for(l=0;l<h.accuracy-k;l+=1){m=m+"0";}p=o+"."+m;h.hiddenEl.val(p);p=a(p);p=h.mark+p;}}}h.inputEl.val(p);};h.inputEl.focusin(e);h.inputEl.focusout(d);h.inputEl.focusin();h.inputEl.focusout();};})();(function(a){a.extend(a.fn,{progressbar:function(m){var b=a.extend({renderTo:a(document.body),enable:true,barWidth:200,barHeight:40,barCssName:"progressbar",completedCssName:"jquery-completed",percent:true},m);b.renderTo=(typeof b.renderTo=="string"?a(b.renderTo):b.renderTo);var f="";if(b.percent){f='<div style = "z-index:3;"><div style = "z-index:-1;"></div><span>0%</span></div>';}else{f="<div><div></div></div>";}var j="";var c=a(f).attr("class",b.barCssName).css("width",b.barWidth).css("Height",b.barHeight).css("text-align","center").appendTo(b.renderTo);var d=c.find("div:eq(0)").attr("class",b.completedCssName);var g=c.css("border-top-width").replace(/[^\d]/g,"");var e=c.css("border-bottom-width").replace(/[^\d]/g,"");var h=c.css("height").replace(/[^\d]/g,"");var l="";if(a.browser.msie){l=h-e-g;}else{l=h;}var k=l-6;if(l<0||k<0){throw new Error("请将进度条的高度和线条的宽度设置调整�?下，进度条的高度减去两�?�的线条宽度加上6不能小于零�??");}d.css("height",l+"px");c.css("font-size",k);return c;},setSliderValue:function(c,b,h){try{if(typeof c=="undefined"||c<0||c>100){throw new Error("'v' must between 0 and 100.");}var d=this;if(typeof d=="undefined"){throw new Error("You bound the method to an object that is not a slider!");}d.find("div:eq(0)").css("width",c+"%");var g=d.html();if(g!=""&&b){d.find("span").remove();d.append("<span>"+c+"%</span>");}if(typeof h!="undefined"){h(c);}}catch(f){alert(f.message);}},isParamNull:function(b){if(b==null){return 0;}else{return 1;}},removePros:function(){a(this).remove();}});})(jQuery);function getParamName(a){var b="";switch(a){case 0:b="renderTo:renderTo";break;case 1:b="barWidth:barWidth";break;case 2:b="barHeight:barHeight";break;case 3:b="barCssName:barCssName";break;case 4:b="completedCssName:completedCssName";break;case 5:b="percent:isPercent";break;}return b;}function createProsBar(renderTo,barWidth,barHeight,barCssName,completedCssName,isPercent){var rt=new Array(5);rt[0]=$.fn.isParamNull(renderTo);rt[1]=$.fn.isParamNull(barWidth);rt[2]=$.fn.isParamNull(barHeight);rt[3]=$.fn.isParamNull(barCssName);rt[4]=$.fn.isParamNull(completedCssName);rt[5]=$.fn.isParamNull(isPercent);var jsonParams="{";for(i=0;i<6;i++){if(rt[i]==1){jsonParams=jsonParams+getParamName(i)+",";}}jsonParams=jsonParams.substr(0,jsonParams.length-1);jsonParams=jsonParams+"}";var myE=eval("("+jsonParams+")");var s=$.fn.progressbar(myE);return s;}(function($){$.fn.swapClass=function(c1,c2){return this.removeClass(c1).addClass(c2);};$.fn.switchClass=function(c1,c2){if(this.hasClass(c1)){return this.swapClass(c1,c2);}else{return this.swapClass(c2,c1);}};$.fn.treeview=function(settings){var dfop={method:"POST",datatype:"json",url:false,cbiconpath:"tree/images/icons/",icons:["checkbox_0.gif","checkbox_1.gif","checkbox_2.gif"],radioIcons:["radio_0.gif","radio_1.gif"],showcheck:false,showradio:false,oncheckboxclick:false,onselect:false,onnodeclick:false,onnodedblclick:false,cascadecheck:true,parentCascadecheck:true,data:null,theme:"bbit-tree-arrows",className:"bbit-tree",aHasSelected:"",aNeedLazy:false,contextMenu:false,title:"root",displayDeep:false,error:false};$.extend(dfop,settings);var idPathMap=[];var treenodes=dfop.data;var me=$(this);var id=me.attr("id");if(id==null||id==""){id="bbtree"+new Date().getTime();me.attr("id",id);}if(dfop.showcheck){for(var i=0;i<3;i++){var im=new Image();im.src=dfop.cbiconpath+dfop.icons[i];}}if(dfop.showradio){for(var i=0;i<2;i++){var im=new Image();im.src=dfop.cbiconpath+dfop.radioIcons[i];}}function initTreeData(data){var orderedData=[];if(data&&data.length>0){var l=data.length;for(var i=0;i<l;i++){orderedData[""+data[i].id]=i;}var pid;for(var i=0;i<l;i++){pid=data[i].pid;if(pid!="-1"){data[i].parent=data[orderedData[""+pid]];data[orderedData[""+pid]].ChildNodes.push(data[i]);data[orderedData[""+pid]].hasChildren=true;}}orderedData.length=0;for(var i=0;i<l;i++){pid=data[i].pid;if(pid=="-1"){orderedData.push(data[i]);}}buildIdPathMap(orderedData,"");}return orderedData;}function buildIdPathMap(orderedData,path){var l=orderedData.length;var data;var tempPath;for(var i=0;i<l;i++){data=orderedData[i];tempPath=path===""?i:path+"."+i;data.path=tempPath;idPathMap[""+data.id]=data.path;if(data.ChildNodes&&data.ChildNodes.length>0){buildIdPathMap(data.ChildNodes,data.path);}}}function buildtree(data,ht){ht.push("<div class='bbit-tree-bwrap'>");ht.push("<div class='bbit-tree-body'>");ht.push("<ul class='bbit-tree-root ",dfop.theme,"'>");ht.push("<li class='bbit-tree-node-root'>");ht.push("<div unselectable='on'");ht.push("<span class='bbit-tree-node-indent'>");ht.push("</span>");ht.push("<img class='bbit-tree-ec-icon","' src='"+dfop.cbiconpath+"base.gif'/>");ht.push("<a hideFocus class='bbit-tree-node-anchor' tabIndex=1 href='javascript:void(0);'>");ht.push("<span unselectable='on'>",dfop.title,"</span>");ht.push("</a>");ht.push("</div>");ht.push("</li>");if(data&&data.length>0){var l=data.length;for(var i=0;i<l;i++){buildnode(data[i],ht,0,i,i==l-1);}}else{asnyloadc(null,false,function(data){if(data&&data.length>0){data=initTreeData(data);treenodes=data;dfop.data=data;initSelectedNodes(dfop.data,null,0);var l=data.length;for(var i=0;i<l;i++){buildnode(data[i],ht,0,i,i==l-1);}}});}ht.push("</ul>");ht.push("</div>");ht.push("</div>");}function buildnode(nd,ht,deep,path,isend){if(dfop.displayDeep&&deep>=dfop.displayDeep){return false;}var nid=nd.id.replace(/[^\w]/gi,"_");ht.push("<li class='bbit-tree-node'>");ht.push("<div id='",id,"_",nid,"' tpath='",path,"' unselectable='on' title='",nd.text,"'");var cs=[];cs.push("bbit-tree-node-el");if(nd.hasChildren&&(!dfop.displayDeep||deep<dfop.displayDeep-1)){cs.push(nd.isexpand?"bbit-tree-node-expanded":"bbit-tree-node-collapsed");}else{cs.push("bbit-tree-node-leaf");}if(nd.classes){cs.push(nd.classes);}ht.push(" class='",cs.join(" "),"'>");ht.push("<span class='bbit-tree-node-indent'>");if(deep==0){if(isend){nd.deepline="0";}else{nd.deepline="1";}}else{if(deep>0){var parentDeepline=nd.parent.deepline;var deeplineLength=parentDeepline.length;var singleDeepline;for(var i=0;i<deeplineLength;i++){singleDeepline=parentDeepline.substring(i,i+1);if(singleDeepline=="0"){ht.push("<img class='bbit-tree-icon' src='"+dfop.cbiconpath+"s.gif'/>");}else{if(singleDeepline=="1"){ht.push("<img class='bbit-tree-elbow-line' src='"+dfop.cbiconpath+"s.gif'/>");}}}if(isend){nd.deepline=parentDeepline+"0";}else{nd.deepline=parentDeepline+"1";}}}ht.push("</span>");cs.length=0;if(nd.hasChildren&&(!dfop.displayDeep||deep<dfop.displayDeep-1)){if(nd.isexpand){cs.push(isend?"bbit-tree-elbow-end-minus":"bbit-tree-elbow-minus");}else{cs.push(isend?"bbit-tree-elbow-end-plus":"bbit-tree-elbow-plus");}}else{cs.push(isend?"bbit-tree-elbow-end":"bbit-tree-elbow");}ht.push("<img class='bbit-tree-ec-icon ",cs.join(" "),"' src='"+dfop.cbiconpath+"s.gif'/>");if(nd.imgPath&&nd.imgPath.length>0){ht.push("<img class='bbit-tree-node-icon' style='background-image:url(",nd.imgPath,");' src='"+dfop.cbiconpath+"s.gif'/>");}else{ht.push("<img class='bbit-tree-node-icon' src='"+dfop.cbiconpath+"s.gif'/>");}if(dfop.showradio&&nd.showcheck){if(nd.checkstate==null||nd.checkstate==undefined){nd.checkstate=0;}else{if(nd.checkstate!=0){nd.checkstate=1;}}ht.push("<img  id='",id,"_",nid,"_cb' class='bbit-tree-node-ra' src='",dfop.cbiconpath,dfop.radioIcons[nd.checkstate],"'/>");}if(dfop.showcheck&&nd.showcheck){if(nd.checkstate==null||nd.checkstate==undefined){nd.checkstate=0;}ht.push("<img  id='",id,"_",nid,"_cb' class='bbit-tree-node-cb' src='",dfop.cbiconpath,dfop.icons[nd.checkstate],"'/>");}ht.push("<a hideFocus class='bbit-tree-node-anchor' tabIndex=1 href='javascript:void(0);'>");ht.push("<span unselectable='on'>",nd.text,"</span>");ht.push("</a>");ht.push("</div>");if(nd.hasChildren&&(!dfop.displayDeep||deep<dfop.displayDeep-1)){if(nd.isexpand){ht.push("<ul  class='bbit-tree-node-ct'  style='z-index: 0; position: static; visibility: visible; top: auto; left: auto;'>");if(nd.ChildNodes){var l=nd.ChildNodes.length;for(var k=0;k<l;k++){nd.ChildNodes[k].parent=nd;buildnode(nd.ChildNodes[k],ht,deep+1,path+"."+k,k==l-1);}}ht.push("</ul>");}else{ht.push("<ul style='display:none;'></ul>");}}ht.push("</li>");nd.render=true;}function getItem(path){ap=path.toString().split(".");var t=treenodes;for(var i=0;i<ap.length;i++){if(i==0){t=t[ap[i]];}else{t=t.ChildNodes[ap[i]];}}return t;}function checkRadio(item,state){var nid;var et;if(dfop.ritem){if(dfop.ritem.id!=item.id){dfop.ritem.checkstate=0;nid=dfop.ritem.id.replace(/[^\w]/gi,"_");et=$("#"+id+"_"+nid+"_cb");if(et.length==1){et.attr("src",dfop.cbiconpath+dfop.radioIcons[dfop.ritem.checkstate]);if(dfop.onselect){dfop.onselect.call(et,dfop.ritem,dfop.ritem.checkstate);}}}}if(state==1){dfop.ritem=item;dfop.ritem.checkstate=state;if(dfop.onselect){dfop.onselect.call(this,dfop.ritem,dfop.ritem.checkstate);}nid=dfop.ritem.id.replace(/[^\w]/gi,"_");et=$("#"+id+"_"+nid+"_cb");if(et.length==1){et.attr("src",dfop.cbiconpath+dfop.radioIcons[dfop.ritem.checkstate]);}}}function check2(item,state,type){var pstate=item.checkstate;var state2=state;if(state==1&&item.ChildNodes){var cs=item.ChildNodes;var l=cs.length;var ch=true;for(var i=0;i<l;i++){if(state==1&&cs[i].checkstate!=1){ch=false;break;}}if(!ch){state2=2;}}else{if(state!=0&&item.hasChildren){state2=2;}}if(type==0&&pstate!=0&&state==0){state2=2;}item.checkstate=state2;if(pstate!=item.checkstate){if(dfop.onselect){dfop.onselect.call(this,item,item.checkstate);}if(item.render){var nid=item.id.replace(/[^\w]/gi,"_");var et=$("#"+id+"_"+nid+"_cb");if(et.length==1){et.attr("src",dfop.cbiconpath+dfop.icons[item.checkstate]);}}}}function bubble2(fn,item,args){var p=item.parent;while(p){if((p.checkstate==0&&!dfop.parentCascadecheck)||fn(p,args,0)===false){break;}p=p.parent;}}function check(item,state,type){var pstate=item.checkstate;if(type==1){item.checkstate=state;}else{var cs=item.ChildNodes;var l=cs.length;var ch=true;for(var i=0;i<l;i++){if((state==1&&cs[i].checkstate!=1)||state==0&&cs[i].checkstate!=0){ch=false;break;}}if(ch){item.checkstate=state;}else{item.checkstate=2;}}if(pstate!=item.checkstate){if(dfop.onselect){dfop.onselect.call(this,item,item.checkstate);}if(item.render){var nid=item.id.replace(/[^\w]/gi,"_");var et=$("#"+id+"_"+nid+"_cb");if(et.length==1){et.attr("src",dfop.cbiconpath+dfop.icons[item.checkstate]);}}}}function cascade(fn,item,args){if(fn(item,args,1)!=false){item.isSelectedAll=true;if(item.ChildNodes!=null&&item.ChildNodes.length>0){var cs=item.ChildNodes;for(var i=0,len=cs.length;i<len;i++){cascade(fn,cs[i],args);}}}}function bubble(fn,item,args){var p=item.parent;while(p){if(fn(p,args,0)===false){break;}p=p.parent;}}function nodeclick(e){var path=$(this).attr("tpath");var et=e.target||e.srcElement;var item=getItem(path);if(et.tagName=="IMG"){if($(et).hasClass("bbit-tree-elbow-plus")||$(et).hasClass("bbit-tree-elbow-end-plus")){var ul=$(this).next();if(ul.hasClass("bbit-tree-node-ct")){ul.show();}else{var deep=path.split(".").length;if(item.complete){item.ChildNodes!=null&&asnybuild(item.ChildNodes,deep,path,ul,item);}else{$(this).addClass("bbit-tree-node-loading");asnyloadc(item,true,function(data){item.complete=true;item.ChildNodes=data;if(data&&data.length>0){var l=data.length;for(var i=0;i<l;i++){data[i].path=item.path+"."+i;idPathMap[""+data[i].id]=data[i].path;}}asnybuild(data,deep,path,ul,item);});}}if($(et).hasClass("bbit-tree-elbow-plus")){$(et).swapClass("bbit-tree-elbow-plus","bbit-tree-elbow-minus");}else{$(et).swapClass("bbit-tree-elbow-end-plus","bbit-tree-elbow-end-minus");}$(this).swapClass("bbit-tree-node-collapsed","bbit-tree-node-expanded");}else{if($(et).hasClass("bbit-tree-elbow-minus")||$(et).hasClass("bbit-tree-elbow-end-minus")){$(this).next().hide();if($(et).hasClass("bbit-tree-elbow-minus")){$(et).swapClass("bbit-tree-elbow-minus","bbit-tree-elbow-plus");}else{$(et).swapClass("bbit-tree-elbow-end-minus","bbit-tree-elbow-end-plus");}$(this).swapClass("bbit-tree-node-expanded","bbit-tree-node-collapsed");}else{if($(et).hasClass("bbit-tree-node-ra")){var s=1;var r=true;if(dfop.oncheckboxclick){r=dfop.oncheckboxclick.call(et,item,s);}if(r!=false){clearSeleted(me[0].t);checkRadio(item,s);}}else{if($(et).hasClass("bbit-tree-node-cb")){var s;if(dfop.cascadecheck){s=item.checkstate!=1?1:0;}else{s=item.checkstate!=0?0:1;}var r=true;if(dfop.oncheckboxclick){r=dfop.oncheckboxclick.call(et,item,s);}if(r!=false){if(dfop.cascadecheck){item.isSelectedAll=true;removeSelfOrChildrenSeleted(me[0].t,item.id);cascade(check,item,s);if(dfop.parentCascadecheck){bubble(check,item,s);}}else{check2(item,s,1);bubble2(check2,item,s);}}}}}}}else{if(dfop.citem){var nid=dfop.citem.id.replace(/[^\w]/gi,"_");$("#"+id+"_"+nid).removeClass("bbit-tree-selected");}dfop.citem=item;$(this).addClass("bbit-tree-selected");if(dfop.onnodeclick){if(!item.expand){item.expand=function(){expandnode.call(item);};}dfop.onnodeclick.call(this,item);}}}function expandnode(){var item=this;var nid=item.id.replace(/[^\w]/gi,"_");var img=$("#"+id+"_"+nid+" img.bbit-tree-ec-icon");if(img.length>0){img.click();}}function nodeDblclick(e){var path=$(this).attr("tpath");var et=e.target||e.srcElement;var item=getItem(path);if(et.tagName!="IMG"){if(dfop.onnodedblclick){dfop.onnodedblclick.call(this,item);}}}function asnybuild(nodes,deep,path,ul,pnode){var l=nodes.length;if(l>0){initSelectedNodes(nodes,pnode,1);var ht=[];for(var i=0;i<l;i++){nodes[i].parent=pnode;buildnode(nodes[i],ht,deep,path+"."+i,i==l-1);}ul.html(ht.join(""));ht=null;InitEvent(ul);}ul.addClass("bbit-tree-node-ct").css({"z-index":0,position:"static",visibility:"visible",top:"auto",left:"auto",display:""});ul.prev().removeClass("bbit-tree-node-loading");}function asnyloadc(pnode,isAsync,callback){if(dfop.url){if(pnode&&pnode!=null){var param=builparam(pnode);}$.ajax({type:dfop.method,url:dfop.url,data:param,async:isAsync,dataType:dfop.datatype,success:callback,error:function(e){if(dfop.error){dfop.error.call(this,e);}else{alert("error occur!");}}});}}function builparam(node){var p=[{name:"id",value:encodeURIComponent(node.id)},{name:"text",value:encodeURIComponent(node.text)},{name:"value",value:encodeURIComponent(node.value)},{name:"checkstate",value:node.checkstate}];return p;}function bindevent(){$(this).hover(function(){$(this).addClass("bbit-tree-node-over");},function(){$(this).removeClass("bbit-tree-node-over");}).click(nodeclick).dblclick(nodeDblclick).find("img.bbit-tree-ec-icon").each(function(e){if(!$(this).hasClass("bbit-tree-elbow")){$(this).hover(function(){$(this).parent().addClass("bbit-tree-ec-over");},function(){$(this).parent().removeClass("bbit-tree-ec-over");});}});}function InitEvent(parent){var nodes=$("li.bbit-tree-node>div",parent);nodes.each(bindevent);nodes.bind("contextmenu",function(e){var et=e.target||e.srcElement;if(et.tagName!="IMG"){if(dfop.citem){var nid=dfop.citem.id.replace(/[^\w]/gi,"_");$("#"+id+"_"+nid).removeClass("bbit-tree-selected");}var path=$(this).attr("tpath");var item=getItem(path);dfop.citem=item;$(this).addClass("bbit-tree-selected");if(dfop.contextMenu){eval(dfop.contextMenu).displayMenu(e,this);return false;}}});}function reflash(itemId){var nid=itemId.replace(/[^\w-]/gi,"_");var node=$("#"+id+"_"+nid);if(node.length>0){node.addClass("bbit-tree-node-loading");var isend=node.hasClass("bbit-tree-elbow-end")||node.hasClass("bbit-tree-elbow-end-plus")||node.hasClass("bbit-tree-elbow-end-minus");var path=node.attr("tpath");var deep=path.split(".").length;var item=getItem(path);if(item){asnyloadc(item,true,function(data){item.complete=true;item.ChildNodes=data;item.isexpand=true;if(data&&data.length>0){item.hasChildren=true;}else{item.hasChildren=false;}var ht=[];buildnode(item,ht,deep-1,path,isend);ht.shift();ht.pop();var li=node.parent();li.html(ht.join(""));ht=null;InitEvent(li);bindevent.call(li.find(">div"));});}}else{alert("该节点还没有生成");}}function reLoadData(data,aHasSelected){dfop.citem=null;dfop.ritem=null;me.html("");dfop.data=data;dfop.aHasSelected=aHasSelected;var idPathMap=[];dfop.data=initTreeData(dfop.data);treenodes=dfop.data;var html=[];initSelectedNodes(dfop.data,null,0);buildtree(dfop.data,html);me.addClass(dfop.className).html(html.join(""));InitEvent(me);html=null;}function getck(items,c,fn,deep){if(dfop.displayDeep&&deep>=dfop.displayDeep){return false;}for(var i=0,l=items.length;i<l;i++){(items[i].showcheck==true&&items[i].checkstate==1)&&c.push(fn(items[i]));if(items[i].ChildNodes!=null&&items[i].ChildNodes.length>0){getck(items[i].ChildNodes,c,fn,deep+1);}}}function getCkAndHalfCkIds(items,c,fn,deep){if(dfop.displayDeep&&deep>=dfop.displayDeep){return false;}var item;for(var i=0,l=items.length;i<l;i++){item=items[i];if(item.showcheck==true&&(item.checkstate==1||item.checkstate==2)){if(!dfop.cascadecheck||item.complete){c.singleNode.push(fn(item));}else{if(checkSelfOrChildrenHasSelected(me[0].t,item.id)){c.singleNode.push(fn(item));}else{c.multiNode.push(fn(item));}}removeSelfSeleted(me[0].t,item.id);}if(items[i].ChildNodes!=null&&items[i].ChildNodes.length>0){getCkAndHalfCkIds(items[i].ChildNodes,c,fn);}}}function getCkAndHalfCk(items,c,fn,deep){if(dfop.displayDeep&&deep>=dfop.displayDeep){return false;}for(var i=0,l=items.length;i<l;i++){(items[i].showcheck==true&&(items[i].checkstate==1||items[i].checkstate==2))&&c.push(fn(items[i]));if(items[i].ChildNodes!=null&&items[i].ChildNodes.length>0){getCkAndHalfCk(items[i].ChildNodes,c,fn,deep+1);}}}function initSelectedNodes(items,parentNode,type){if(dfop.aNeedLazy){if(dfop.showradio){initRadioSelectedNodes(items);}else{if(dfop.showcheck){initLazySelectedNodes(items,parentNode,type);}}}else{if(type==0){if(dfop.showradio){initRadioSelectedNodes(items);}else{if(dfop.showcheck){initStaticSelectedNodes(items);}}}}}function initRadioSelectedNodes(items){var item;for(var i=0,l=items.length;i<l;i++){item=items[i];if(item.showcheck==true&&checkSelfHasSelected(me[0].t,item.id)){checkRadio(item,1);removeSelfSeleted(me[0].t,item.id);}if(item.ChildNodes&&item.ChildNodes.length>0){initRadioSelectedNodes(item.ChildNodes);}}}function initLazySelectedNodes(items,parentNode,type){var item;var state=0;if(type==1){state=(parentNode.checkstate&&parentNode.isSelectedAll&&!checkSelectedNode(items))?1:0;}for(var i=0,l=items.length;i<l;i++){item=items[i];if(item.showcheck==true){if(dfop.cascadecheck){if(checkSelfOrChildrenHasSelected(me[0].t,item.id)){check2(item,1,1);bubble2(check2,item,1);}else{if(state){cascade(check,item,1);bubble2(check,item,1);}}}else{if(checkSelfHasSelected(me[0].t,item.id)){check2(item,1,1);bubble2(check2,item,1);}}}if(items[i].ChildNodes&&items[i].ChildNodes.length>0){initLazySelectedNodes(items[i].ChildNodes,items[i],type);}}}function checkSelectedNode(items){var item;var hasSelected=false;for(var i=0,l=items.length;i<l;i++){item=items[i];if(item.showcheck==true){if(checkSelfOrChildrenHasSelected(me[0].t,item.id)){hasSelected=true;break;}}}return hasSelected;}function initStaticSelectedNodes(items){if(items&&items.length>0){var l=items.length;for(var i=0;i<l;i++){initStaticSelectedNode(items[i]);}}}function initStaticSelectedNode(item){var state=checkSelfHasSelected(me[0].t,item.id)?1:0;removeSelfSeleted(me[0].t,item.id);if(item.ChildNodes&&item.ChildNodes.length>0){var l=item.ChildNodes.length;var childState;var allChildSelected=1;for(var i=0;i<l;i++){childState=initStaticSelectedNode(item.ChildNodes[i]);if((state==1&&childState!=1)||(dfop.cascadecheck&&dfop.parentCascadecheck&&state==0&&childState!=0)){state=2;}if(childState!=1){allChildSelected=0;}}if(state==2&&allChildSelected==1){state=1;}}item.checkstate=state;return state;}me[0].t={getAllTreeNodes:function(){return treenodes;},getSelectedNodes:function(gethalfchecknode){var s=[];if(gethalfchecknode){getCkAndHalfCk(treenodes,s,function(item){return item;},0);}else{getck(treenodes,s,function(item){return item;},0);}return s;},getSelectedIds:function(){var initSelectedNode=dfop.aHasSelected;var s={singleNode:[],multiNode:[]};if(dfop.aNeedLazy){try{getCkAndHalfCkIds(treenodes,s,function(item){return item.id;},0);if(dfop.aHasSelected&&dfop.aHasSelected!=""&&dfop.aHasSelected!=","){var aHasSelected=dfop.aHasSelected;aHasSelected=aHasSelected.substring(1,aHasSelected.length-1);var aHasSelectedIds=aHasSelected.split(",");for(var j=0;j<aHasSelectedIds.length;j++){s.singleNode.push(aHasSelectedIds[j]);}}}catch(e){alert(e);}finally{dfop.aHasSelected=initSelectedNode;}return s;}else{getCkAndHalfCk(treenodes,s.singleNode,function(item){return item.id;},0);return s.singleNode;}},getCurrentItem:function(){return dfop.citem;},reflash:function(itemOrItemId){var id;if(typeof(itemOrItemId)=="string"){id=itemOrItemId;}else{id=itemOrItemId.id;}reflash(id);},getNodeById:function(nodeId){var path=idPathMap[""+nodeId];var item=getItem(path);if(item){return item;}return null;},checkItem:function(nodeId,checkState,cascadeState){var path=idPathMap[""+nodeId];if(path||path===0){var item=getItem(path);if(dfop.showradio){if(cascadeState){clearSeleted(me[0].t);}checkRadio(item,checkState);}else{if(dfop.showcheck){var s=checkState;if(cascadeState&&dfop.cascadecheck){item.isSelectedAll=true;removeSelfOrChildrenSeleted(me[0].t,item.id);cascade(check,item,s);if(dfop.parentCascadecheck){bubble(check,item,s);}}else{if(dfop.cascadecheck&&dfop.parentCascadecheck){check2(item,s,1);bubble(check2,item,s);}else{check2(item,s,1);bubble2(check2,item,s);}}}}return true;}return false;},getHasSelected:function(){return dfop.aHasSelected;},setHasSelected:function(hasSelected){dfop.aHasSelected=hasSelected;},reLoadData:function(data,aHasSelected){reLoadData(data,aHasSelected);}};reLoadData(dfop.data,dfop.aHasSelected);return me;};$.fn.getTSIds=function(){if(this[0].t){return this[0].t.getSelectedIds();}return null;};$.fn.getTSNs=function(gethalfchecknode){if(this[0].t){return this[0].t.getSelectedNodes(gethalfchecknode);}return null;};$.fn.getTCT=function(){if(this[0].t){return this[0].t.getCurrentItem();}return null;};$.fn.reflash=function(ItemOrItemId){if(this[0].t){return this[0].t.reflash(ItemOrItemId);}};$.fn.getAllTreeNodes=function(){return this[0].t.getAllTreeNodes();};$.fn.getNodeById=function(nodeId){return this[0].t.getNodeById(nodeId);};$.fn.checkItem=function(nodeId,checkState,cascade){return this[0].t.checkItem(nodeId,checkState,cascade);};$.fn.reLoadData=function(data,aHasSelected){this[0].t.reLoadData(data,aHasSelected);};})(jQuery);function checkChildrenHasSelected(a,b){pattern=new RegExp("\\,"+b+"\\S+\\,");return a.getHasSelected()?pattern.test(a.getHasSelected()):false;}function checkSelfHasSelected(a,b){pattern=new RegExp("\\,"+b+"\\,");return a.getHasSelected()?pattern.test(a.getHasSelected()):false;}function checkSelfOrChildrenHasSelected(a,b){pattern=new RegExp("\\,"+b+"\\S*\\,");return a.getHasSelected()?pattern.test(a.getHasSelected()):false;}function removeSelfOrChildrenSeleted(a,b){pattern=new RegExp("\\,"+b+"\\S*\\,");if(a.getHasSelected()){a.setHasSelected(a.getHasSelected().replace(pattern,","));}}function removeSelfSeleted(a,b){pattern=new RegExp("\\,"+b+"\\,");if(a.getHasSelected()){a.setHasSelected(a.getHasSelected().replace(pattern,","));}}function clearSeleted(a){if(a.getHasSelected()){a.setHasSelected(null);}}(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var validator=$.data(this[0],"validator");if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}this.submit(function(event){if(validator.settings.debug){event.preventDefault();}function handle(){trimForm(validator.currentForm);if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}return false;}if(validator.settings.submitTip){showLoadingTip("数据正在提交，请稍后...");}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});$(this)[0].onSubmit=function(event){if(validator.settings.debug){event.preventDefault();}function handle(){trimForm(validator.currentForm);if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}};}return validator;},valid:function(){if($(this[0]).is("form")){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[":"],{blank:function(a){return !$.trim(a.value);},filled:function(a){return !!$.trim(a.value);},unchecked:function(a){return !a.checked;}});$.validator=function(options,form){this.settings=$.extend({},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}var reg=new RegExp("\\{\\d+\\}");$.each(params,function(i,n){source=source.replace(reg,n);});return source;};$.validator.formatString=function(source,params){if(arguments.length==1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.formatString.apply(this,args);};}if(arguments.length>2&&params.constructor!=Array){params=params.toString();params=$.makeArray(params.split(","));}if(params.constructor!=Array){params=[params];}var reg=new RegExp("\\{\\d+\\}");$.each(params,function(i,n){source=source.replace(reg,n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"",tipClass:"tooltip",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,submitTip:true,onfocusin:function(element){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);},onkeyup:function(element){},onfocusout:function(element){if($(element).attr("tagFlag")=="numberInput"){element=$("#"+element.id.substring(1));this.element(element);}else{if(($(element).attr("tagFlag")!="dateTime")&&!this.checkable(element)){this.element(element);}}},onclick:function(element){if(this.checkable(element)){this.element(element);}},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"errors_required",remote:"errors_remote",email:"errors_email",url:"errors_url",date:"errors_date",dateISO:"errors_dateISO",dateDE:"errors_dateDE",number:"errors_number",numberDE:"errors_numberDE",digits:"errors_digits",creditcard:"errors_creditcard",equalTo:"errors_equalTo",accept:"errors_accept",maxlength:"errors_maxlength",minlength:"errors_minlength",rangelength:"errors_rangelength",range:"errors_range",max:"errors_max",min:"errors_min"},autoCreateRanges:false,prototype:{_getElementByError:function($error){var idOrName=$error.attr("for");var element=$("#"+idOrName);if(!element[0]){element=$("*[name='"+idOrName+"']");}if(!element[0]){return null;}return element;},_getLastElement:function($element){var element1=$element;if($element.attr("tagFlag")&&$element.attr("tagFlag")=="numberInput"){var idOrName=this.idOrName($element[0]);idOrName="_"+idOrName;var element1=$("#"+idOrName);if(!element1[0]){element1=$("*[name='"+idOrName+"']");}}while($(element1).next()[0]&&/input|a|img/i.test($(element1).next()[0].tagName)&&"block"==$(element1).next().attr("display")){element1=$(element1).next();}return element1;},_placeErrorLabel:function($element,$errorLabel){var pos=$element.position();var dim={width:$element.outerWidth(),height:$element.outerHeight()};var dim2={width:$errorLabel.width(),height:$errorLabel.height()};var scrolltop=0;var scrollleft=0;var parentElement=$element;parentElement=$(parentElement.parent());while(parentElement[0]){if(parentElement[0].tagName&&parentElement[0].tagName.toLowerCase()=="body"){if($errorLabel.parent()[0].tagName&&$errorLabel.parent()[0].tagName.toLowerCase()=="body"){scrolltop=scrolltop+parentElement[0].scrollTop;scrollleft=scrollleft+parentElement[0].scrollLeft;}break;}scrolltop=scrolltop+parentElement[0].scrollTop;scrollleft=scrollleft+parentElement[0].scrollLeft;parentElement=$(parentElement.parent());}$errorLabel.css({left:""+(pos.left+dim.width+scrollleft),top:""+(pos.top+scrolltop+dim.height/2-dim2.height/2)});dim2={width:$errorLabel.width(),height:$errorLabel.height()};$errorLabel.css({left:""+(pos.left+dim.width+scrollleft)+"px",top:""+(pos.top+scrolltop+dim.height/2-dim2.height/2)+"px"});$errorLabel.css({width:""+dim2.width,height:""+dim2.height});},windowResize:function(){var errorLabels=$($.validator.defaults.errorElement+"."+$.validator.defaults.errorClass.split(" ")[0]);$.each(errorLabels,function(index,errorLabel){var width=$(errorLabel).width();var height=$(errorLabel).height();$(errorLabel).css({width:"",height:""});var element=this._getElementByError($(errorLabel));if(!element||!element[0]){return;}var element1=this._getLastElement(element);var pos=$(element1).position();var dim={width:$(element1).outerWidth(),height:$(element1).outerHeight()};if($(errorLabel).width()<width){$(errorLabel).css({width:width,height:height});}else{$(errorLabel).css({width:""+$(errorLabel).width(),height:""+$(errorLabel).height()});}this._placeErrorLabel(element1,$(errorLabel));});},init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.container=$(this.settings.container);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator");validator.settings["on"+event.type]&&validator.settings["on"+event.type].call(validator,this[0]);}$(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",delegate).delegate("click",":radio, :checkbox",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return !(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj){count++;}return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if((this.name in rulesCache&&/radio|checkbox/i.test(this.type))||!validator.objectLength($(this).rules())){return false;}rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass.split(" ")[0]);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.formSubmitted=false;this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id+", check the '"+rule.method+"' method");throw e;}}if(dependencyMismatch){return true;}if(this.objectLength(rules)){this.successList.push(element);}return true;},customMetaMessage:function(element,method){if(!$.metadata){return;}var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){var index=new RegExp("\\{\\d+\\}");for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){var argumentsI=eval(arguments[i]);if(index.test(argumentsI)){return $.validator.formatString(argumentsI);}else{return argumentsI;}}}return undefined;},defaultMessage:function(element,method){return this.findDefined($(element).attr(method+"Msg")?$(element).attr(method+"Msg"):undefined,this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method);if(typeof message=="function"){message=message.call(this,rule.parameters,element);}this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},errorLabelInitHtml:function(message){var arr=[];if(!this.labelContainer||this.labelContainer.length==0){arr.push("  <table border='0' cellspacing='0' cellpadding='0' class='tooltiptable'>");arr.push("  	<tr><td class='cornerTop topleft'></td>");arr.push("          <td class='topcenter'></td>");arr.push("          <td class='cornerTop topright'></td></tr>");arr.push("  	<tr><td class='corner bodyleft'></td>");arr.push("			<td class='tooltipcontent'>"+message+"</td>");arr.push("			<td class='corner bodyright'></td></tr>");arr.push("		<tr><td class='cornerTop footerleft'></td>");arr.push("          <td class='footercenter'></td>");arr.push("			<td class='cornerTop footerright'></td></tr>");arr.push("  </table>");}else{arr.push(message);}return arr.join("");},showLabel:function(element,message){var label=this.errorsFor(element);if(label&&label.length>0){label.attr("generated")&&label.html(this.errorLabelInitHtml(message));label.css({width:"",height:""});label.removeClass().addClass(this.settings.errorClass);if(!this.labelContainer||this.labelContainer.length==0){label.addClass(this.settings.tipClass);var element1=this._getLastElement($(element));this._placeErrorLabel(element1,label);label.show();}}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).css({left:"0px",top:"0px","z-index":"999",display:"none"}).html(this.errorLabelInitHtml(message)||"");if(!this.labelContainer||this.labelContainer.length==0){label.addClass(this.settings.tipClass).click(function(){$(this).hide();});}if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}var element1=this._getLastElement($(element));if(!this.labelContainer.append(label).length){this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.appendTo(this.container);this._placeErrorLabel(element1,label);label.show();}}if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){return this.errors().filter("[for='"+this.idOrName(element)+"']");},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length;}}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},string:function(param,element){return !!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return !$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();}else{if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);}}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",previous={old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr("class");classes&&$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){if(value==="true"){rules[method]=true;}else{if(value==="false"){rules[method]=false;}else{rules[method]=value;}}}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata){return{};}var meta=$.data(element.form,"validator").settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(["minlength","maxlength","min","max"],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(["rangelength","range"],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages;}return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message||$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}switch(element.nodeName.toLowerCase()){case"select":var options=$("option:selected",element);return options.length>0&&(element.type=="select-multiple"||($.browser.msie&&!(options[0].attributes.value.specified)?options[0].text:options[0].value).length>0);case"input":if(this.checkable(element)){return this.getLength(value,element)>0;}default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch";}var previous=this.previousValue(element);if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}this.settings.messages[element.name].remote=typeof previous.message=="function"?previous.message(value):previous.message;param=typeof param=="string"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};errors[element.name]=previous.message=response||validator.defaultMessage(element,"remote");validator.showErrors(errors);}previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}else{if(this.pending[element.name]){return"pending";}}return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},dateDE:function(value,element){return this.optional(element)||/^\d\d?\.\d\d?\.\d\d\d?\d?$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},numberDE:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch";}if(/[^0-9-]+/.test(value)){return false;}var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9;}}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){return value==$(param).val();}}});$.format=$.validator.format;})(jQuery);(function(c){var b=c.ajax;var a={};c.ajax=function(e){e=c.extend(e,c.extend({},c.ajaxSettings,e));var d=e.port;if(e.mode=="abort"){if(a[d]){a[d].abort();}return(a[d]=b.apply(this,arguments));}return b.apply(this,arguments);};})(jQuery);(function(a){a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){if(a.browser.msie){return false;}this.addEventListener(c,a.event.special[b].handler,true);},teardown:function(){if(a.browser.msie){return false;}this.removeEventListener(c,a.event.special[b].handler,true);},handler:function(d){arguments[0]=a.event.fix(d);arguments[0].type=b;return a.event.handle.apply(this,arguments);}};});a.extend(a.fn,{delegate:function(d,c,b){return this.bind(d,function(e){var f=a(e.target);if(f.is(c)){if(!a.browser.msie&&e.type=="focusout"){if(a.data(f[0],"events")&&a.data(f[0],"events")["focusout"]){f.triggerHandler("focusout");e.stopPropagation();}}return b.apply(f,arguments);}});},triggerEvent:function(b,c){return this.triggerHandler(b,[a.event.fix({type:b,target:c})]);}});})(jQuery);$.validator.addMethod("customFunction",function ajaxFunction(value,element,param){var returnValue=eval(param).call(element);if(typeof returnValue=="string"){$.validator.messages.customFunction='"'+returnValue+'"';return false;}else{if(typeof returnValue=="boolean"){return returnValue;}else{return false;}}},"errors_customFunction");$.validator.addMethod("string",function(b,a){return this.optional(a)||/^[\u0391-\uFFE5\w]+$/.test(b);},"errors_string");$.validator.addMethod("byteRangeLength",function(d,b,f){var c=d.length;var e=f.split(",");for(var a=0;a<d.length;a++){if(d.charCodeAt(a)>127){c++;}}return this.optional(b)||(c>=e[0]&&c<=e[1]);},"errors_byteRangeLength");$.validator.addMethod("byteMinLength",function(d,b,f){var c=d.length;var e=f.split(",");for(var a=0;a<d.length;a++){if(d.charCodeAt(a)>127){c++;}}return this.optional(b)||(c>=e);},"errors_byteMinLength");$.validator.addMethod("byteMaxLength",function(d,b,f){var c=d.length;var e=f.split(",");for(var a=0;a<d.length;a++){if(d.charCodeAt(a)>127){c++;}}return this.optional(b)||(c<=e);},"errors_byteMaxLength");$.validator.addMethod("customReg",function(c,a,d){if(d==""){return true;}var b=new RegExp(d);return b.test(c);},"errors_customReg");$.validator.addMethod("ip",function(b,a){return this.optional(a)||(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(b)&&(RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256));},"errors_ip");$.validator.addMethod("mobile",function(d,b){var c=d.length;var a=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return this.optional(b)||(c==11&&a.test(d));},"errors_mobile");$.validator.addMethod("telephone",function(c,b){var a=/^\d{3,4}-?\d{7,9}$/;return this.optional(b)||(a.test(c));},"errors_telephone");$.validator.addMethod("phone",function(e,c){var d=e.length;var b=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;var a=/^\d{3,4}-?\d{7,9}$/;return this.optional(c)||(a.test(e)||b.test(e));},"errors_phone");$.validator.addMethod("zipCode",function(c,b){var a=/^[0-9]{6}$/;return this.optional(b)||(a.test(c));},"errors_zipCode");(function(){var a=function(d){var c=$("#"+d.tabHeadRenderer),g=$("#"+d.tabBodyRenderer),f=$(d.tabHeadTemplate),b=d.tabHeadWidth,e=d.autoAdaptFunc;that=this;this.tabHeadTemplate=f;this.tabHeadWidth=b;this.autoAdaptFunc=e;this.showMenu=d.showMenu;this.tabHeadRenderer=c;this.tabBodyRenderer=g;this.tabHeadContainer=$('<div class="tabHeadContainer"></div>');this.tabHeadSlider=$('<div class="tabHeadSlider"></div>');this.tabHeadWraper=$('<ul class="tabHeadWraper"></ul>');this.tabHeaddown=$('<div class="tabHeaddown"></div>').hide();this.init();this.tabHeaddown.click(function(r){var t=that.tabHeadSlider,u=t.find(".tabHead:hidden"),j=u.size(),s,k,o,p,l=[],m,h;var q=function(y){var A=this.data.alias.slice(10),w=$("#"+A),x=that.tabHeadWraper.find(".tabHead"),z=that.tabHeadWraper.find(".menubg"),v;if(z.css("display")==="none"){that.tabHeadWraper.find("li:visible").first().hide();w.show();w.find(".tabHeadText").click();}z.hide();w.show();w.find(".tabHeadText").click();};if(j>0){for(p=0;p<j;p+=1){s=$(u[p]);k=s.find(".tabHeadText").html();o=s.attr("id");l[p]={text:k,alias:"menuoption"+o,icon:imgPath+"/contextmenu/page_go.png",action:q};}m={alias:"aaaaa"+new Date(),items:l};h=$.fn.contextmenu(m);h.displayMenuByPos(r,this,{top:r.pageY,left:r.pageX});}});};a.prototype={init:function(){var b=this;b.hasResize=false;this.tabHeadRenderer.append(this.tabHeadContainer);this.tabHeadContainer.append(this.tabHeadSlider);this.tabHeadSlider.append(this.tabHeadWraper);this.tabHeadContainer.append(this.tabHeaddown);this.tabWidth=this._autoAdaptWidth();this.tabHeadContainer.width(this.tabWidth);this.tabHeadSlider.width(this.tabWidth-this.tabHeaddown.outerWidth());$(window).bind("resize",function(){b.tabWidth=b._autoAdaptWidth();if($.browser.msie&&($.browser.version=="6.0")&&!$.support.style){if(!b.hasResize){b.hasResize=true;b.tabHeadContainer.width(b.tabWidth);b.tabHeadSlider.width(b.tabWidth-b.tabHeaddown.outerWidth());b.showhide();}setTimeout(function(){b.hasResize=false;},1000);}else{b.tabHeadContainer.width(b.tabWidth);b.tabHeadSlider.width(b.tabWidth-b.tabHeaddown.outerWidth());b.showhide();}if(b.tabHeadWraper.find("li.menubg").css("display")==="none"){b.tabHeadWraper.find("li").first().hide();b.tabHeadWraper.find("li.menubg").show();b.tabHeadWraper.find("li.menubg").find(".tabHeadText").click();}});},_autoAdaptWidth:function(){if(this.autoAdaptFunc&&typeof(this.autoAdaptFunc)=="function"){return this.autoAdaptFunc.call(this);}return this.tabHeadRenderer.outerWidth();},add:function(z){var h=this,t=z.id,p=z.text,y=z.closeAble,f=z.url,w=z.content,g=this.tabHeadTemplate.clone().attr("id",t),x=g.find(".tabHeadText").append(p),c=g.find(".tabHeadClose"),d=this.tabHeadWidth,q=this.tabWidth,B=this.tabHeadWraper,A=this.tabBodyRenderer,m=$('<div class="tabBodyWraper" id="_'+t+'" style="width:100%;height:100%;"></div>'),k=this.tabHeaddown,v=z.lazy!=null?z.lazy:false,e=z.highlight!=null?z.highlight:true,s=z.callback||function(){},u=z.callbackargs,r=function(){c.click();},j=function(){var D=B.find(".tabHead").not(g),C;for(C=0;C<D.size();C+=1){$(D[C]).find(".tabHeadClose").click();}},l=function(){B.find(".tabHead").find(".tabHeadClose").click();},o={alias:"menu"+t,items:[{text:"关闭当前",icon:imgPath+"/contextmenu/page_delete.png",alias:"menuOptiona",action:r},{text:"关闭其他",icon:imgPath+"/contextmenu/page_delete.png",alias:"menuOptionb",action:j},{text:"关闭全部",icon:imgPath+"/contextmenu/page_delete.png",alias:"menuOptionc",action:l}]},b=$.fn.contextmenu(o);this.reset();B.prepend(g);x.width(d);if((!v)&&f){m.append('<iframe src="'+f+'" width="100%" height="100%" frameborder="0"></iframe>');A.append(m);}else{if(w!=null&&w!=undefined&&w!="null"){m.append(w);A.append(m);}}g.click(function(){if(f&&v){m.append('<iframe src="'+f+'" width="100%" height="100%" frameborder="0"></iframe>');A.append(m);v=false;}h.reset();h.active(g);s.call(null,h.tabHeadWraper.find(".tabHead").index(g),p,"_"+t,u);});if(!e){g.removeClass("menubg").addClass("menubg2");$("#_"+g.attr("id")).hide();}if(this.showMenu){x.bind("contextmenu",function(C){b.displayMenuByPos(C,this,{top:C.pageY,left:C.pageX});C.preventDefault();});}if(y){c.show();c.click(function(){var G=B.find(".tabHead"),D=G.index(g),F=G.size(),H,C=0,E;g.remove();var I=g.attr("id");$("#_"+I).remove();if(h.isActive(g)){if(D+1===F){h.active($(G[D-1]));}else{h.active($(G[D+1]));}}if(B.find(".menubg:hidden").size()>0){B.find(".menubg").show();}else{B.find(".tabHead:hidden").first().show();}if(B.find(".tabHead:hidden").size()<1){h.tabHeaddown.hide();}});}else{c.hide();}this.showhide();if(e){g.click();}},showhide:function(){var e=this.tabHeadWraper,g=e.find(".tabHead"),d,b=0,c=this.tabWidth-that.tabHeaddown.outerWidth(),f=this.tabHeaddown;for(d=0;d<g.size();d+=1){b=b+this.getHSpace($(g[d]));if(b>c){$(g[d]).hide();b=b-this.getHSpace($(g[d]));f.show();}else{$(g[d]).show();f.hide();}}},reset:function(){var b=this.tabHeadWraper,c=this.tabBodyRenderer;b.find(".menubg").removeClass("menubg").addClass("menubg2");c.children().hide();},active:function(b){var d=b.attr("id"),c=$("#_"+d);b.removeClass("menubg2").addClass("menubg");c.show();},getHSpace:function(b){return b.outerWidth(true);},isExist:function(b){if(this.tabHeadWraper.find("#"+b).size()===1){return true;}else{return false;}},activeId:function(b){this.reset();this.tabHeadWraper.find("#"+b).find(".tabHeadText").click();},isActive:function(b){if(b.hasClass("menubg")){return true;}else{return false;}}};window.HTabPanel=a;})();(function(){var a=function(e){var b=$("#"+e.tabHeadRenderer),h=$("#"+e.tabBodyRenderer),g=$('<li class="tabHead"><div class="container"><span class="tabHeadLeft"></span><span class="tabHeadLeft_left"></span><span class="tabHeadText"></span><span class="tabHeadClose"></span><span class="tabHeadright"></span></div></li>'),c=e.tabHeadHeight,d=e.showMenu,f=e.autoAdaptFunc;that=this;this.tabHeadRenderer=b;this.tabBodyRenderer=h;this.tabHeadTemplate=g;this.tabHeadHeight=c;this.autoAdaptFunc=f;this.showMenu=d;this.tabHeadContainer=$('<div class="tabHeadContainer"></div>');this.tabHeadSlider=$('<div class="tabHeadSlider"></div>');this.tabHeadWraper=$('<ul class="tabHeadWraper"></ul>');this.tabHeaddown=$('<div class="tabHeaddown"></div>').hide();this.tabBodyWraperTemplate=$('<div class="tabBodyWraper" style="width:100%;height:100%;"></div>');this.init();this.tabHeaddown.click(function(s){var u=that.tabHeadSlider,v=u.find(".tabHead:hidden"),k=v.size(),t,l,p,q,m=[],o,j;var r=function(z){var B=this.data.alias.slice(10),x=$("#"+B),y=that.tabHeadWraper.find(".tabHead"),A=that.tabHeadWraper.find(".highLight").parent(".tabHead"),w;if(A.size()!=0){A.hide();}else{y.first().hide();}x.show();x.click();};if(k>0){for(q=0;q<k;q+=1){t=$(v[q]);l=t.find(".tabHeadText").html();p=t.attr("id");m[q]={text:l,alias:"menuoption"+p,icon:imgPath+"/contextmenu/view.png",action:r};}o={alias:"aaaaa"+new Date(),items:m};j=$.fn.contextmenu(o);j.displayMenuByPos(s,this,{top:s.pageY,left:s.pageX});}});};a.prototype={init:function(){var b=this;b.hasResize=false;this.tabHeadSlider.append(this.tabHeadWraper);this.tabHeadContainer.append(this.tabHeadSlider);this.tabHeadContainer.append(this.tabHeaddown);this.tabHeadContainer.appendTo(this.tabHeadRenderer);this.tabHeight=this._autoAdaptHeight();b.tabHeadContainer.height(this.tabHeight);b.tabHeadSlider.height(this.tabHeight-this.tabHeaddown.outerHeight());$(window).bind("resize",function(){b.tabHeight=b._autoAdaptHeight();if($.browser.msie&&($.browser.version=="6.0")&&!$.support.style){if(!b.hasResize){b.hasResize=true;b.tabHeadContainer.height(b.tabHeight);b.tabHeadSlider.height(b.tabHeight-b.tabHeaddown.outerHeight());b.setHidden();}setTimeout(function(){b.hasResize=false;},1000);}else{b.tabHeadContainer.height(b.tabHeight);b.tabHeadSlider.height(b.tabHeight-b.tabHeaddown.outerHeight());b.setHidden();}});},_autoAdaptHeight:function(){if(this.autoAdaptFunc&&typeof(this.autoAdaptFunc)=="function"){return this.autoAdaptFunc.call(this);}return this.tabHeadRenderer.outerHeight();},initTabHeadTemplate:function(e,b,c){var d=this.tabHeadTemplate.clone();d.attr("id",e);if(c){d.find(".tabHeadClose").show();}else{d.find(".tabHeadClose").hide();}d.find(".tabHeadText").append(b);return d;},reset:function(){var b,c;this.tabHeadWraper.find(".tabHeadCss").removeClass("tabHeadCss");this.tabHeadWraper.find(".tabMidCss").removeClass("tabMidCss");this.tabHeadWraper.find(".tabTailCss").removeClass("tabTailCss");this.tabHeadWraper.find(".nhighLight").removeClass("nhighLight");this.tabHeadWraper.find(".highLight").removeClass("highLight");this.tabHeadWraper.find(".downHighLight").removeClass("downHighLight");this.tabHeadWraper.find(".upHighLight").removeClass("upHighLight");b=this.tabHeadWraper.find("li.tabHead:visible");for(c=0;c<b.size();c+=1){if(c===0){$(b[c]).addClass("tabHeadCss");$(b[c]).find("div.container").addClass("nhighLight");}else{if(c===b.size()-1){$(b[c]).addClass("tabTailCss");$(b[c]).find(".container").addClass("nhighLight");}else{$(b[c]).addClass("tabMidCss");$(b[c]).find(".container").addClass("nhighLight");}}}this.tabBodyRenderer.children().hide();},active:function(f){var d,e,c=this.tabHeadWraper.find("li.tabHead:visible"),b=c.index(f);this.reset();if(c.size()===1){f.addClass("tabTailCss");f.find("div.nhighLight").removeClass("nhighLight").addClass("highLight");}else{if(b===0){f.find("div.nhighLight").removeClass("nhighLight").addClass("highLight");$(c[b+1]).find(".nhighLight").addClass("upHighLight");}else{if(b===c.size()-1){f.find("div.nhighLight").removeClass("nhighLight").addClass("highLight");$(c[b-1]).find(".nhighLight").addClass("downHighLight");}else{f.find(".nhighLight").removeClass("nhighLight").addClass("highLight");$(c[b+1]).find(".nhighLight").addClass("upHighLight");$(c[b-1]).find(".nhighLight").addClass("downHighLight");}}}$("#_"+f.attr("id")).show();},getIndex:function(b){return this.tabHeadWraper.find(".tabHead").index(b);},isActive:function(b){if(b.find(".highLight").size()===0){return false;}else{return true;}},remove:function(b){var c=b.attr("id");$("#_"+c).remove();b.remove();},setHidden:function(){var d=this.tabHeadWraper.find(".tabHead"),e,f=0;var c=d.find("div.highLight").parent();var b=this.tabHeight-this.tabHeaddown.outerHeight();for(e=0;e<d.size();e+=1){f=f+$(d[e]).outerHeight(true);if(f>b){f=f-$(d[e]).outerHeight(true);$(d[e]).hide();this.tabHeaddown.show();this.active(c);}else{$(d[e]).show();this.tabHeaddown.hide();this.active(c);}}if(c.is(":hidden")){this.tabHeadWraper.find(".tabHead:visible").first().hide();c.show();this.active(c);}},isExist:function(b){if(this.tabHeadWraper.find("#"+b).size()){return true;}else{return false;}},activeId:function(b){this.tabHeadWraper.find("#"+b).click();},add:function(u){var p=u.id,t=u.text,m=u.closeAble,d=u.url,s=u.content,g=this,o=u.callback||function(){},q=u.callbackargs,e=this.initTabHeadTemplate(p,t,m),j=this.tabBodyWraperTemplate.clone(),r=u.lazy,c=u.highlight;this.tabHeadWraper.prepend(e);e.height(this.tabHeadHeight);e.find("div.container").height(this.tabHeadHeight);j.attr("id","_"+p);if((!r)&&d){j.append('<iframe width="100%" frameborder="0" height="100%" src="'+d+'"></iframe>');this.tabBodyRenderer.append(j);}else{if(s!=undefined&&s!=null&&s!="null"){j.append(s);this.tabBodyRenderer.append(j);}}this.setHidden();if(this.tabHeadWraper.find(".tabHead:hidden").size()!==0){g.tabHeaddown.show();}var m=function(){e.find(".tabHeadClose").click();},h=function(){var w=g.tabHeadWraper.find(".tabHead").not(e),v;for(v=0;v<w.size();v+=1){$(w[v]).find(".tabHeadClose").click();}},k=function(){g.tabHeadWraper.find(".tabHead").find(".tabHeadClose").click();},l={alias:"menu"+p,items:[{text:"关闭当前",icon:imgPath+"/contextmenu/page_delete.png",alias:"menuOptiona",action:m},{text:"关闭其他",icon:imgPath+"/contextmenu/page_delete.png",alias:"menuOptionb",action:h},{text:"关闭全部",icon:imgPath+"/contextmenu/page_delete.png",alias:"menuOptionc",action:k}]},b=$.fn.contextmenu(l);if(this.showMenu){g.tabHeadWraper.find(".tabHead").bind("contextmenu",function(v){b.displayMenuByPos(v,this,{top:v.pageY,left:v.pageX});v.stopImmediatePropagation();v.preventDefault();});}e.click(function(v){if(d&&r){j.append('<iframe width="100%" frameborder="0" height="100%" src="'+d+'"></iframe>');g.tabBodyRenderer.append(j);r=false;}g.reset();g.active(e);o.call(null,g.getIndex(e),t,"_"+p,q);});e.find(".tabHeadClose").click(function(z){var w=e.prev(),v=e.next(),x=g.tabHeadWraper.find(".highLight").parent(".tabHead");if(g.isActive(e)){if(e.hasClass("tabTailCss")){g.remove(e);var y=g.tabHeadWraper.find(".tabHead:hidden").first();if(y.size()){y.show();g.reset();g.active(y);}else{g.reset();g.active(w);}}else{g.remove(e);g.tabHeadWraper.find(".tabHead:hidden").first().show();g.reset();g.active(v);}}else{g.remove(e);g.tabHeadWraper.find(".tabHead:hidden").first().show();g.reset();g.active(x);}if(g.tabHeadWraper.find(".tabHead:hidden").size()===0){g.tabHeaddown.hide();}z.stopImmediatePropagation();});var f=this.tabHeadWraper.find("li.tabHead:visible");if(f.size()===1){e.addClass("tabTailCss");}if(c){e.click();}}};window.VTabPanel=a;})();(function(){$.datetime=function(b){var c=$.extend({elId:"",format:"",readOnly:false,val:null},b);var a=$("#"+c.elId);a.attr("tagFlag","dateTime");a.focus(function(){var d=function(g){var f=g.cal.getNewDateStr(),e=g.cal.getDateStr();a.val(f);if(c.val){c.val.element($("#"+c.elId));}};WdatePicker({onpicking:d,el:c.elId,readOnly:c.readOnly,dateFmt:c.format,errDealMode:1});});};})();